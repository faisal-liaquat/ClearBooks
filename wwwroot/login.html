<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClearBooks - Premium Financial Platform</title>
    <link rel="stylesheet" href="css/auth_styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <!--Background -->
    <div class="geometric-bg"></div>

    <!--Particle System -->
    <div class="particle-system" id="particleSystem"></div>

    <div class="auth-container">
        <div class="auth-card" id="authCard">
            <div class="auth-header">
                <h1>ClearBooks</h1>
                <p>Enterprise Financial Management Platform</p>
            </div>

            <div class="auth-content">
                <h2>Welcome Back</h2>
                <p class="auth-subtitle">Access your financial management system!</p>

                <!--Messages -->
                <div id="error-message" class="message error-message" style="display: none;"></div>
                <div id="success-message" class="message success-message" style="display: none;"></div>

                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="username">
                            <span>👤</span> Username
                        </label>
                        <input type="text" id="username" name="username" placeholder="Enter your username" required autocomplete="username">
                        <span id="username-error" class="error-message"></span>
                    </div>

                    <div class="form-group">
                        <label for="password">
                            <span>🔐</span> Password
                        </label>
                        <input type="password" id="password" name="password" placeholder="Enter your secure password" required autocomplete="current-password">
                        <span id="password-error" class="error-message"></span>
                    </div>

                    <button type="submit" id="login-btn" class="auth-btn">
                        <span class="btn-text">🚀 Access Dashboard</span>
                        <span class="btn-loader" style="display: none;">
                            <span class="loader-spinner"></span>
                            Authenticating...
                        </span>
                    </button>
                </form>

                <div class="auth-footer">
                    <p>New to ClearBooks? <a href="register.html">Create Premium Account →</a></p>
                </div>
            </div>
        </div>

        <div class="auth-background">
            <div class="bg-shape shape-1"></div>
            <div class="bg-shape shape-2"></div>
            <div class="bg-shape shape-3"></div>
        </div>
    </div>

    <!--Load auth scripts -->
    <script src="js/auth_scripts.js"></script>
    <script>
        //Initialize login
        document.addEventListener('DOMContentLoaded', function () {
            if (typeof AuthManager !== 'undefined') {
                AuthManager.initLogin();
            } else {
                console.error('AuthManager not loaded');
            }

            //Initialize animations and effects
            initPremiumEffects();
        });

        function initPremiumEffects() {
            //Create dynamic particle system
            createParticleSystem();

            //Add card interactions
            initCardInteractions();

            //Add input effects
            initInputEffects();

            //Add form validation
            initPremiumValidation();
        }

        function createParticleSystem() {
            const particleSystem = document.getElementById('particleSystem');
            const particleCount = 15;

            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 15 + 's';
                    particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                    particleSystem.appendChild(particle);

                    //Remove particle after animation
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 25000);
                }, i * 200);
            }

            //Continuously add new particles
            setInterval(() => {
                if (particleSystem.children.length < particleCount) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = '0s';
                    particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                    particleSystem.appendChild(particle);

                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 25000);
                }
            }, 1000);
        }

        function initCardInteractions() {
            const authCard = document.getElementById('authCard');

            authCard.addEventListener('mousemove', (e) => {
                const rect = authCard.getBoundingClientRect();
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;

                authCard.style.background = `
                    radial-gradient(circle at ${x}% ${y}%,
                        rgba(255, 255, 255, 0.98) 0%,
                        rgba(248, 250, 252, 0.95) 40%,
                        rgba(240, 245, 251, 0.92) 100%)
        `;

                const rotateX = (y - 50) * 0.08;
                const rotateY = (x - 50) * -0.08;
                authCard.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(0)`;
            });

            authCard.addEventListener('mouseleave', () => {
                authCard.style.background = `linear-gradient(135deg,
                    rgba(255, 255, 255, 0.95) 0%,
                    rgba(255, 255, 255, 0.9) 50%,
                    rgba(248, 250, 252, 0.95) 100%)`;
                authCard.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0)';
            });
        }


        function initInputEffects() {
            const inputs = document.querySelectorAll('input');

            inputs.forEach((input, index) => {
                //Add focus ripple effect
                input.addEventListener('focus', () => {
                    createRippleEffect(input);

                    //GSAP animation if available
                    if (typeof gsap !== 'undefined') {
                        gsap.to(input, {
                            duration: 0.3,
                            scale: 1.02,
                            boxShadow: '0 0 0 4px rgba(0, 212, 255, 0.2), 0 20px 40px rgba(0, 0, 0, 0.3)',
                            ease: "power2.out"
                        });
                    }
                });

                input.addEventListener('blur', () => {
                    if (typeof gsap !== 'undefined') {
                        gsap.to(input, {
                            duration: 0.3,
                            scale: 1,
                            boxShadow: '0 0 0 0px transparent, 0 0 0 transparent',
                            ease: "power2.out"
                        });
                    }
                });

                //Add typing animation
                input.addEventListener('input', () => {
                    if (typeof gsap !== 'undefined') {
                        gsap.fromTo(input,
                            { x: -2 },
                            { x: 0, duration: 0.1, ease: "power2.out" }
                        );
                    }
                });
            });
        }

        function createRippleEffect(element) {
            const ripple = document.createElement('div');
            const rect = element.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);

            ripple.style.position = 'absolute';
            ripple.style.width = size + 'px';
            ripple.style.height = size + 'px';
            ripple.style.borderRadius = '50%';
            ripple.style.background = 'rgba(0, 212, 255, 0.3)';
            ripple.style.transform = 'scale(0)';
            ripple.style.pointerEvents = 'none';
            ripple.style.left = '50%';
            ripple.style.top = '50%';
            ripple.style.marginLeft = '-' + (size / 2) + 'px';
            ripple.style.marginTop = '-' + (size / 2) + 'px';

            element.style.position = 'relative';
            element.style.overflow = 'hidden';
            element.appendChild(ripple);

            if (typeof gsap !== 'undefined') {
                gsap.to(ripple, {
                    duration: 0.6,
                    scale: 1,
                    opacity: 0,
                    ease: "power2.out",
                    onComplete: () => {
                        if (ripple.parentNode) {
                            ripple.parentNode.removeChild(ripple);
                        }
                    }
                });
            } else {
                //fallback animation
                ripple.style.transition = 'transform 0.6s ease-out, opacity 0.6s ease-out';
                setTimeout(() => {
                    ripple.style.transform = 'scale(1)';
                    ripple.style.opacity = '0';
                }, 10);

                setTimeout(() => {
                    if (ripple.parentNode) {
                        ripple.parentNode.removeChild(ripple);
                    }
                }, 600);
            }
        }

        function initPremiumValidation() {
            const form = document.getElementById('login-form');
            const submitBtn = document.getElementById('login-btn');

            //Add real-time validation 
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');

            usernameInput.addEventListener('input', () => {
                validateInputWithEffect(usernameInput, usernameInput.value.length >= 3);
            });

            passwordInput.addEventListener('input', () => {
                validateInputWithEffect(passwordInput, passwordInput.value.length >= 6);
            });

            // Add form submission effect
            form.addEventListener('submit', (e) => {
                if (typeof gsap !== 'undefined') {
                    gsap.to(submitBtn, {
                        duration: 0.2,
                        scale: 0.95,
                        ease: "power2.out",
                        yoyo: true,
                        repeat: 1
                    });
                }
            });
        }

        function validateInputWithEffect(input, isValid) {
            if (isValid) {
                input.style.borderColor = 'rgba(0, 255, 127, 0.6)';
                input.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';
                input.style.boxShadow = '0 0 0 2px rgba(0, 255, 127, 0.2), inset 0 1px 3px rgba(0, 255, 127, 0.1)';

                //Add success checkmark effect
                if (!input.nextElementSibling || !input.nextElementSibling.classList.contains('success-indicator')) {
                    const successIndicator = document.createElement('div');
                    successIndicator.className = 'success-indicator';
                    successIndicator.innerHTML = '✓';
                    successIndicator.style.cssText = `
                            position: absolute;
                            right: 15px;
                            top: 50%;
                            transform: translateY(-50%);
                            color: #00ff7f;
                            font-weight: bold;
                            font-size: 18px;
                            opacity: 0;
                            transition: opacity 0.3s ease;
                        `;

                    input.parentNode.style.position = 'relative';
                    input.parentNode.appendChild(successIndicator);

                    setTimeout(() => {
                        successIndicator.style.opacity = '1';
                    }, 100);
                }
            } else {
                input.style.borderColor = 'rgba(0, 102, 255, 0.15)';
                input.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
                input.style.boxShadow = 'inset 0 1px 3px rgba(0, 102, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1)';

                //Remove success indicator
                const successIndicator = input.parentNode.querySelector('.success-indicator');
                if (successIndicator) {
                    successIndicator.remove();
                }
            }
        }

        //Add page transitions
        window.addEventListener('beforeunload', () => {
            if (typeof gsap !== 'undefined') {
                gsap.to('body', {
                    duration: 0.5,
                    opacity: 0,
                    scale: 1.1,
                    ease: "power2.in"
                });
            }
        });

        //Add premium screen
        window.addEventListener('load', () => {
            const loadingScreen = document.createElement('div');
            loadingScreen.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(135deg, #0066ff 0%, #004dd9 50%, #001a4d 100%);
                    z-index: 9999;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 24px;
                    font-weight: 700;
                `;
            loadingScreen.innerHTML = '<div>💎 ClearBooks</div>';
            document.body.appendChild(loadingScreen);

            if (typeof gsap !== 'undefined') {
                gsap.to(loadingScreen, {
                    duration: 1,
                    opacity: 0,
                    scale: 1.2,
                    ease: "power2.inOut",
                    delay: 0.5,
                    onComplete: () => {
                        loadingScreen.remove();
                    }
                });
            } else {
                setTimeout(() => {
                    loadingScreen.style.transition = 'opacity 1s ease, transform 1s ease';
                    loadingScreen.style.opacity = '0';
                    loadingScreen.style.transform = 'scale(1.2)';
                    setTimeout(() => loadingScreen.remove(), 1000);
                }, 500);
            }
        });
    </script>
</body>
</html>